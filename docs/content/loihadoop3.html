<h1>ğŸ› ï¸ Xá»­ LÃ½ Sá»± Cá»‘ ThÆ°á»ng Gáº·p Khi CÃ i Äáº·t Hadoop 3.3.6</h1>
<p>DÆ°á»›i Ä‘Ã¢y lÃ  tá»•ng há»£p cÃ¡c váº¥n Ä‘á» báº¡n cÃ³ thá»ƒ gáº·p pháº£i (vÃ  Ä‘Ã£ gáº·p pháº£i!) khi triá»ƒn khai Hadoop 3.3.6 á»Ÿ cháº¿ Ä‘á»™ giáº£ láº­p phÃ¢n tÃ¡n (Pseudo-Distributed Mode) trÃªn Ubuntu/WSL2 vÃ  cÃ¡ch kháº¯c phá»¥c chÃºng.</p>

<hr>

<h2>1. Lá»—i Lá»‡nh Linux trong MÃ´i trÆ°á»ng Windows (Lá»—i MÃ´i trÆ°á»ng)</h2>
<h3>NguyÃªn nhÃ¢n:</h3>
<ul>
    <li>Cá»‘ gáº¯ng cháº¡y cÃ¡c lá»‡nh Linux nhÆ° <code>sudo</code>, <code>apt</code>, hoáº·c <code>jps</code> trá»±c tiáº¿p trong **Windows Command Prompt (CMD)** hoáº·c **PowerShell**.</li>
    <li>MÃ´i trÆ°á»ng **WSL (Ubuntu)** chÆ°a Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng.</li>
</ul>
<h3>CÃ¡ch kháº¯c phá»¥c:</h3>
<ol>
    <li>**Äáº£m báº£o Ä‘ang á»Ÿ WSL:** LuÃ´n thá»±c hiá»‡n cÃ¡c lá»‡nh cÃ i Ä‘áº·t Hadoop trong cá»­a sá»• **Ubuntu/WSL2** Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t.</li>
    <li>**Khá»Ÿi Ä‘á»™ng láº¡i WSL:** Náº¿u gáº·p lá»—i, cháº¡y <code>wsl --shutdown</code> trong CMD rá»“i má»Ÿ láº¡i Ubuntu.</li>
</ol>

<hr>

<h2>2. Lá»—i Quyá»n Ghi/Giáº£i NÃ©n (Operation Not Permitted)</h2>
<h3>NguyÃªn nhÃ¢n:</h3>
<ul>
    <li>Thao tÃ¡c táº£i (<code>wget</code>) hoáº·c giáº£i nÃ©n (<code>tar -xzvf</code>) file Hadoop trÃªn **phÃ¢n vÃ¹ng Windows Ä‘Æ°á»£c mount** (vÃ­ dá»¥: thÆ° má»¥c <code>/mnt/d/PROJECT</code>).</li>
    <li>Há»‡ thá»‘ng Linux bá»‹ giá»›i háº¡n quyá»n ghi metadata (nhÆ° `utime`) trÃªn há»‡ thá»‘ng file NTFS cá»§a Windows.</li>
</ul>
<h3>CÃ¡ch kháº¯c phá»¥c:</h3>
<ol>
    <li>**Di chuyá»ƒn thÆ° má»¥c lÃ m viá»‡c:** LuÃ´n táº£i vÃ  giáº£i nÃ©n file Hadoop trong **thÆ° má»¥c Home cá»§a Linux** (<code>~</code> hoáº·c <code>/home/$USER</code>).</li>
    <li>Cháº¡y lá»‡nh chuyá»ƒn hÆ°á»›ng vÃ  táº£i láº¡i:</li>
    <pre><code>cd ~
wget [Ä‘Æ°á»ng_dáº«n_Hadoop]
tar -xzvf hadoop-3.3.6.tar.gz</code></pre>
</ol>

<hr>

<h2>3. Lá»—i NameNode/DataNode KhÃ´ng Khá»Ÿi Ä‘á»™ng (Lá»—i Khá»Ÿi táº¡o)</h2>
<h3>NguyÃªn nhÃ¢n:</h3>
<ul>
    <li>**Sai Ä‘Æ°á»ng dáº«n Java:** ÄÆ°á»ng dáº«n <code>JAVA_HOME</code> trong <code>hadoop-env.sh</code> hoáº·c <code>.bashrc</code> khÃ´ng chÃ­nh xÃ¡c.</li>
    <li>**Thiáº¿u ThÆ° má»¥c Dá»¯ liá»‡u:** CÃ¡c thÆ° má»¥c Ä‘Æ°á»£c khai bÃ¡o trong <code>hdfs-site.xml</code> chÆ°a Ä‘Æ°á»£c táº¡o (`namenode`, `datanode`).</li>
    <li>**ChÆ°a Format NameNode:** QuÃ¡ trÃ¬nh khá»Ÿi táº¡o HDFS chÆ°a Ä‘Æ°á»£c thá»±c hiá»‡n.</li>
</ul>
<h3>CÃ¡ch kháº¯c phá»¥c:</h3>
<ol>
    <li>**Kiá»ƒm tra JAVA_HOME:** Äáº£m báº£o <code>export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64</code> Ä‘Ã£ Ä‘Æ°á»£c Ä‘áº·t Ä‘Ãºng trong cáº£ <code>.bashrc</code> vÃ  <code>hadoop-env.sh</code>.</li>
    <li>**Táº¡o ThÆ° má»¥c:** Cháº¡y lá»‡nh táº¡o thÆ° má»¥c náº¿u chÆ°a lÃ m:</li>
    <pre><code>mkdir -p /usr/local/hadoop/data/namenode
mkdir -p /usr/local/hadoop/data/datanode</code></pre>
    <li>**Format NameNode:** Cháº¡y lá»‡nh format (CHá»ˆ Má»˜T Láº¦N!):</li>
    <pre><code>hdfs namenode -format</code></pre>
</ol>

<hr>

<h2>4. Lá»—i "command not found" (Lá»—i CÃº phÃ¡p)</h2>
<h3>NguyÃªn nhÃ¢n:</h3>
<ul>
    <li>Cá»‘ gáº¯ng má»Ÿ file báº±ng cÃ¡ch gÃµ tÃªn file (vÃ­ dá»¥: <code>core-site.xml</code>) thay vÃ¬ gá»i trÃ¬nh soáº¡n tháº£o.</li>
    <li>ChÆ°a táº£i láº¡i biáº¿n mÃ´i trÆ°á»ng sau khi chá»‰nh sá»­a <code>.bashrc</code>.</li>
</ul>
<h3>CÃ¡ch kháº¯c phá»¥c:</h3>
<ol>
    <li>**DÃ¹ng nano:** LuÃ´n má»Ÿ file cáº¥u hÃ¬nh báº±ng trÃ¬nh soáº¡n tháº£o:</li>
    <pre><code>nano core-site.xml</code></pre>
    <li>**Source láº¡i cáº¥u hÃ¬nh:** Sau khi sá»­a <code>.bashrc</code>, luÃ´n cháº¡y:</li>
    <pre><code>source ~/.bashrc</code></pre>
</ol>

<hr>

<h2>5. Lá»—i SSH: Bá»‹ há»i Máº­t kháº©u hoáº·c Bá»‹ káº¹t á»Ÿ XÃ¡c nháº­n 'yes'</h2>
<h3>NguyÃªn nhÃ¢n:</h3>
<ul>
    <li>ChÆ°a cháº¡y lá»‡nh <code>cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys</code> (chÆ°a á»§y quyá»n).</li>
    <li>Láº§n Ä‘áº§u SSH trÃªn WSL bá»‹ lá»—i xá»­ lÃ½ nháº­p liá»‡u.</li>
</ul>
<h3>CÃ¡ch kháº¯c phá»¥c:</h3>
<ol>
    <li>**á»¦y quyá»n:** Äáº£m báº£o Ä‘Ã£ cháº¡y: <code>cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys</code> vÃ  <code>chmod 0600 ~/.ssh/authorized_keys</code>.</li>
    <li>**Bá» qua xÃ¡c nháº­n:** DÃ¹ng lá»‡nh:</li>
    <pre><code>ssh -o StrictHostKeyChecking=no localhost</code></pre>
    <li>**Náº¿u váº«n lá»—i:** Cháº¡y <code>ssh-keygen -R localhost</code> Ä‘á»ƒ xÃ³a khÃ³a cÅ© vÃ  thá»­ láº¡i.</li>
</ol>

<hr>

<h2>6. Lá»—i Káº¿t Ná»‘i SSH bá»‹ Tá»« Chá»‘i (Connection Refused)</h2>
<h3>NguyÃªn nhÃ¢n:</h3>
<ul>
    <li>Dá»‹ch vá»¥ SSH trÃªn mÃ¡y Linux (WSL2) chÆ°a Ä‘Æ°á»£c khá»Ÿi Ä‘á»™ng hoáº·c bá»‹ cháº·n.</li>
</ul>
<h3>CÃ¡ch kháº¯c phá»¥c:</h3>
<ol>
    <li>**CÃ i Ä‘áº·t vÃ  Khá»Ÿi Ä‘á»™ng láº¡i dá»‹ch vá»¥ SSH:**</li>
    <p>Trong Ubuntu/Linux, báº¡n cháº¡y cÃ¡c lá»‡nh sau Ä‘á»ƒ Ä‘áº£m báº£o dá»‹ch vá»¥ SSH Ä‘Æ°á»£c cÃ i Ä‘áº·t vÃ  hoáº¡t Ä‘á»™ng:</p>
    <pre><code>sudo apt-get install openssh-client openssh-server
sudo service ssh restart
sudo service sshd restart</code></pre>
    <li>**Kiá»ƒm tra láº¡i Passwordless SSH:** Sau khi khá»Ÿi Ä‘á»™ng láº¡i, báº¡n nÃªn cháº¡y láº¡i lá»‡nh kiá»ƒm tra <code>ssh localhost</code>.</li>
</ol>

<hr>

<h2>7. Lá»—i Xung Ä‘á»™t PhiÃªn báº£n Java (Java/Javac Version Conflict)</h2>
<h3>NguyÃªn nhÃ¢n:</h3>
<ul>
    <li>MÃ¡y tÃ­nh cÃ i Ä‘áº·t nhiá»u phiÃªn báº£n Java (vÃ­ dá»¥: Java 17, 11, vÃ  8).</li>
    <li>PhiÃªn báº£n Java Ä‘Æ°á»£c Ä‘áº·t trong biáº¿n <code>JAVA_HOME</code> khÃ´ng Ä‘Æ°á»£c Apache Hadoop 3.3.6 há»— trá»£ (Hadoop 3.3.x há»— trá»£ tá»‘t nháº¥t Java 8 vÃ  11).</li>
</ul>
<h3>CÃ¡ch kháº¯c phá»¥c:</h3>
<ol>
    <li>**Kiá»ƒm tra phiÃªn báº£n Ä‘ang dÃ¹ng:** Cháº¡y <code>java -version</code>. Náº¿u nÃ³ khÃ´ng pháº£i lÃ  Java 8, báº¡n cáº§n Ä‘á»•i phiÃªn báº£n.</li>
    <li>**Äáº£m báº£o `JAVA_HOME` Ä‘Ãºng:** Kiá»ƒm tra vÃ  Ä‘áº£m báº£o <code>export JAVA_HOME</code> trong <code>.bashrc</code> vÃ  <code>hadoop-env.sh</code> Ä‘á»u trá» chÃ­nh xÃ¡c Ä‘áº¿n thÆ° má»¥c cá»§a **Java 8**.</li>
</ol>

<hr>

<h2>8. Lá»—i ÄÆ°á»ng Dáº«n Cáº¥u HÃ¬nh KhÃ´ng Äá»“ng Nháº¥t (Path Mismatch)</h2>
<h3>NguyÃªn nhÃ¢n:</h3>
<ul>
    <li>Báº¡n lÃ m theo cÃ¡c hÆ°á»›ng dáº«n khÃ¡c nhau sá»­ dá»¥ng cÃ¡c Ä‘Æ°á»ng dáº«n khÃ¡c nhau (vÃ­ dá»¥: <code>$HADOOP_HOME=/usr/local/hadoop</code> hoáº·c <code>$HADOOP_HOME=/home/hadoop/hadoop-3.3.0</code>).</li>
    <li>ÄÆ°á»ng dáº«n trong <code>.bashrc</code> khÃ´ng Ä‘á»“ng bá»™ vá»›i Ä‘Æ°á»ng dáº«n Ä‘Æ°á»£c khai bÃ¡o trong cÃ¡c file cáº¥u hÃ¬nh XML.</li>
</ul>
<h3>CÃ¡ch kháº¯c phá»¥c:</h3>
<ol>
    <li>**Chá»n má»™t Ä‘Æ°á»ng dáº«n duy nháº¥t:** (VÃ­ dá»¥: <code>/usr/local/hadoop</code>) vÃ  sá»­ dá»¥ng nháº¥t quÃ¡n trong má»i file.</li>
    <li>**Kiá»ƒm tra chÃ©o:** Äáº£m báº£o Ä‘Æ°á»ng dáº«n <code>$HADOOP_HOME</code> trong <code>hadoop-env.sh</code>, <code>core-site.xml</code> (cho Namenode/Datanode directory), vÃ  <code>yarn-site.xml</code> Ä‘á»u khá»›p nhau.</li>
</ol>

<hr>

<h2>9. Lá»—i Lá»‡nh Khá»Ÿi Ä‘á»™ng (Incorrect Execution Path)</h2>
<h3>NguyÃªn nhÃ¢n:</h3>
<ul>
    <li>Cháº¡y lá»‡nh <code>hdfs namenode -format</code> hoáº·c <code>start-all.sh</code> mÃ  khÃ´ng á»Ÿ trong thÆ° má»¥c chÃ­nh cá»§a Hadoop (vÃ­ dá»¥: Ä‘ang á»Ÿ thÆ° má»¥c Home).</li>
</ul>
<h3>CÃ¡ch kháº¯c phá»¥c:</h3>
<ol>
    <li>**Sá»­ dá»¥ng biáº¿n mÃ´i trÆ°á»ng:** DÃ¹ng lá»‡nh trá»±c tiáº¿p tá»« biáº¿n mÃ´i trÆ°á»ng Ä‘Ã£ thiáº¿t láº­p Ä‘á»ƒ khÃ´ng cáº§n báº­n tÃ¢m Ä‘ang á»Ÿ thÆ° má»¥c nÃ o:</li>
    <pre><code>$HADOOP_HOME/bin/hdfs namenode -format
$HADOOP_HOME/sbin/start-all.sh</code></pre>
    <li>**Hoáº·c sá»­ dá»¥ng lá»‡nh Ä‘Ã£ cÃ³ trong PATH:** Náº¿u <code>source ~/.bashrc</code> Ä‘Ã£ thÃ nh cÃ´ng, chá»‰ cáº§n gÃµ: <code>hdfs namenode -format</code> vÃ  <code>start-all.sh</code>.</li>
</ol>

<hr>

<h2>10. Váº¥n Ä‘á» PhÃ¢n quyá»n ngÆ°á»i dÃ¹ng (User Permission Issues)</h2>
<h3>NguyÃªn nhÃ¢n:</h3>
<ul>
    <li>Thiáº¿u quyá»n <code>sudo</code> hoáº·c quyá»n truy cáº­p thÆ° má»¥c.</li>
    <li>Hadoop Ä‘Æ°á»£c cÃ i Ä‘áº·t dÆ°á»›i má»™t ngÆ°á»i dÃ¹ng khÃ¡c mÃ  ngÆ°á»i dÃ¹ng hiá»‡n táº¡i khÃ´ng cÃ³ quyá»n thao tÃ¡c.</li>
</ul>
<h3>CÃ¡ch kháº¯c phá»¥c:</h3>
<ol>
    <li>**Cáº¥p quyá»n sá»Ÿ há»¯u:** Äáº£m báº£o thÆ° má»¥c cÃ i Ä‘áº·t thuá»™c vá» báº¡n: <code>sudo chown -R $USER:$USER /usr/local/hadoop</code>.</li>
    <li>**Táº¡o ngÆ°á»i dÃ¹ng chuyÃªn dá»¥ng (Giáº£i phÃ¡p nÃ¢ng cao):** Náº¿u gáº·p lá»—i phÃ¢n quyá»n há»‡ thá»‘ng nghiÃªm trá»ng, báº¡n cÃ³ thá»ƒ táº¡o má»™t nhÃ³m vÃ  ngÆ°á»i dÃ¹ng chuyÃªn biá»‡t cho Hadoop, sau Ä‘Ã³ cáº¥p quyá»n <code>sudo</code> cho ngÆ°á»i dÃ¹ng Ä‘Ã³ (sá»­ dá»¥ng <code>visudo</code>).</li>
</ol>

<p>Náº¿u báº¡n gáº·p pháº£i lá»—i khÃ¡c khÃ´ng cÃ³ trong danh sÃ¡ch nÃ y, hÃ£y kiá»ƒm tra láº¡i ká»¹ lÆ°á»¡ng cÃ¡c file XML (Ä‘áº·c biá»‡t lÃ  lá»—i chÃ­nh táº£) vÃ  log file trong <code>/usr/local/hadoop/logs</code> Ä‘á»ƒ tÃ¬m manh má»‘i.</p>